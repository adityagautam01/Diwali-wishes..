<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Diwali Wishes</title>
  <style>
    :root{
      --bg:#0b0f1a;
      --card:#0f1724;
      --accent:#ffcc33;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box;font-family: "Segoe UI", Roboto, Arial, sans-serif}
    html,body{height:100%;margin:0;background: radial-gradient(circle at 10% 10%, #1b2433 0%, var(--bg) 60%); color:#fff}
    .wrap{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      position:relative;
      overflow:hidden;
    }
    .card{
      width:100%;
      max-width:540px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:16px;
      padding:28px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      border: 1px solid rgba(255,255,255,0.04);
      text-align:center;
      z-index:5;
    }
    h1{margin:0 0 8px 0; font-size:28px; letter-spacing:0.3px}
    p.lead{margin:0 0 20px 0; color:#cbd5e1}
    .input-row{display:flex; gap:10px; justify-content:center; margin-bottom:18px}
    input[type="text"]{
      flex:1;
      padding:10px 14px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.06);
      background:var(--glass);
      color:#fff;
      outline:none;
      font-size:16px;
    }
    button{
      padding:10px 16px;
      border-radius:10px;
      border: none;
      cursor:pointer;
      font-weight:600;
      background: linear-gradient(90deg,#ffb347,#ffcc33);
      color:#111;
      box-shadow: 0 6px 18px rgba(255,204,51,0.18);
    }
    .wish{
      margin-top:18px;
      padding:14px;
      border-radius:10px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      color:#fff;
      min-height:64px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:18px;
    }

    /* little sparkles/fireworks (SVG will use this) */
    .subtitle{color:#ffd88a; margin-bottom:6px}
    .small{font-size:13px;color:#9aa7bd;margin-top:10px}

    /* fullscreen canvas for confetti/fireworks */
    #fxCanvas{
      position: absolute;
      inset:0;
      z-index:2;
      pointer-events:none;
    }

    /* footer */
    .footer{font-size:12px;color:#97a6c1;margin-top:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <canvas id="fxCanvas"></canvas>

    <div class="card" role="main" aria-labelledby="title">
      <h1 id="title">Diwali Mubarak! üéÜ</h1>
      <div class="subtitle">Apna naam likho aur warm wishes paao</div>

      <div class="input-row" role="form">
        <input id="nameInput" type="text" placeholder="Your Name (eg. Aadi..)" aria-label="Naam" />
        <button id="wishBtn">Wish</button>
      </div>

      <div id="wishBox" class="wish">Naam likho aur Wish pe click karo ‚ú®</div>
      <div class="small">Tip: browser allow kare to awaaz aur speech chalegi.</div>
      <div class="footer">Made with ‚ù§Ô∏è ‚Äî Happy Diwali</div>
    </div>
  </div>

  <script>
    // Elements
    const nameInput = document.getElementById('nameInput');
    const wishBtn = document.getElementById('wishBtn');
    const wishBox = document.getElementById('wishBox');
    const canvas = document.getElementById('fxCanvas');
    const ctx = canvas.getContext('2d');

    // Resize canvas
    function resizeCanvas(){
      canvas.width = innerWidth * devicePixelRatio;
      canvas.height = innerHeight * devicePixelRatio;
      canvas.style.width = innerWidth + 'px';
      canvas.style.height = innerHeight + 'px';
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // Confetti particles
    let particles = [];
    const colors = ["#ffcc33","#ff7b7b","#7bf3ff","#b39cff","#ffd7a6","#ffffff"];

    function spawnConfetti(x, y, count=80){
      for(let i=0;i<count;i++){
        particles.push({
          x: x + (Math.random()-0.5)*40,
          y: y + (Math.random()-0.5)*40,
          vx: (Math.random()-0.5)*6,
          vy: Math.random()*-6 - 2,
          size: 6 + Math.random()*8,
          life: 60 + Math.random()*60,
          color: colors[Math.floor(Math.random()*colors.length)],
          rotation: Math.random()*Math.PI*2,
          vr: (Math.random()-0.5)*0.3
        });
      }
    }

    // Firework (big burst)
    function fireworkBurst(){
      const cx = Math.random() * innerWidth * 0.8 + innerWidth*0.1;
      const cy = Math.random() * innerHeight * 0.5 + innerHeight*0.05;
      spawnConfetti(cx, cy, 120);
    }

    // Animation loop
    function step(){
      ctx.clearRect(0,0,innerWidth,innerHeight);
      for(let i = particles.length-1; i>=0; i--){
        const p = particles[i];
        p.vy += 0.16; // gravity
        p.vx *= 0.995;
        p.x += p.vx;
        p.y += p.vy;
        p.rotation += p.vr;
        p.life--;
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rotation);
        // draw rectangle confetti
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.6);
        ctx.restore();
        if(p.life<=0 || p.y > innerHeight + 30) particles.splice(i,1);
      }
      requestAnimationFrame(step);
    }
    step();

    // Random bursts while wishes are shown
    let burstInterval = null;
    function startFireworks(){
      if(burstInterval) clearInterval(burstInterval);
      fireworkBurst();
      burstInterval = setInterval(fireworkBurst, 900);
      // also spawn an initial ground confetti
      spawnConfetti(innerWidth/2, innerHeight*0.85, 100);
    }
    function stopFireworks(){
      if(burstInterval) clearInterval(burstInterval);
      burstInterval = null;
    }

    // Play a short chime (WebAudio)
    function playChime(){
      try{
        const A = new (window.AudioContext || window.webkitAudioContext)();
        const o = A.createOscillator();
        const g = A.createGain();
        o.type = "sine";
        o.frequency.setValueAtTime(880, A.currentTime);
        g.gain.setValueAtTime(0, A.currentTime);
        g.gain.linearRampToValueAtTime(0.12, A.currentTime + 0.02);
        g.gain.exponentialRampToValueAtTime(0.001, A.currentTime + 1.1);
        o.connect(g); g.connect(A.destination);
        o.start();
        o.frequency.exponentialRampToValueAtTime(660, A.currentTime + 0.4);
        setTimeout(()=>o.stop(), 1300);
      }catch(e){
        // ignore if audio blocked
      }
    }

    // Speech (read out message)
    function speak(text){
      if('speechSynthesis' in window){
        try{
          const u = new SpeechSynthesisUtterance(text);
          u.lang = 'hi-IN';
          u.rate = 1;
          window.speechSynthesis.cancel(); // stop previous
          window.speechSynthesis.speak(u);
        }catch(e){}
      }
    }

    // Main wish function
    function sendWish(){
      const raw = nameInput.value.trim();
      const name = raw ? raw : "Dost";
      const msgLines = [
        `‚ú® Happy Diwali, ${name}! ‚ú®`,
        `May your life be filled with light, laughter and prosperity.`,
        `Dil se Shubhkamnayein ‚Äî ‡§∂‡•Å‡§≠ ‡§¶‡•Ä‡§™‡§æ‡§µ‡§≤‡•Ä! ü™î`
      ];
      wishBox.innerHTML = `<div style="text-align:center"><div style="font-size:20px;font-weight:700;margin-bottom:6px">${msgLines[0]}</div><div style="color:#dfe7ff">${msgLines[1]}</div><div style="margin-top:8px;color:#ffd88a">${msgLines[2]}</div></div>`;
      // visuals + sound
      spawnConfetti(innerWidth*0.5, innerHeight*0.35, 160);
      startFireworks();
      playChime();
      speak(`Happy Diwali ${name}. Aapko bahut bahut shubhkamnayein.`);
      // stop fireworks after 6 seconds
      setTimeout(stopFireworks, 6000);
    }

    // Button + enter key
    wishBtn.addEventListener('click', sendWish);
    nameInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') sendWish(); });

    // Autofocus
    nameInput.focus();

    // Small accessibility: if user hasn't interacted, don't auto-speak or play audio until click (we only play when they click)
  </script>
</body>
</html>

